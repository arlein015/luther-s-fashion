<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luther Fashion - Boutique</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root { --grad: linear-gradient(to right, #1e3a8a, #a855f7); --bg: #f0f2f5; --txt: #333; --card: #fff; }
        body.dark { --bg: #121212; --txt: #fff; --card: #1e1e1e; }
        body { font-family: 'Poppins', sans-serif; margin: 0; background: var(--bg); color: var(--txt); transition: 0.3s; padding-bottom: 100px; }
        header { padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 30px; font-weight: bold; background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .cats { display: flex; gap: 10px; overflow-x: auto; padding: 15px; scrollbar-width: none; }
        .btn-c { background: var(--card); padding: 8px 18px; border-radius: 20px; border: 1px solid #ddd; cursor: pointer; color: inherit; white-space: nowrap; font-size: 13px; }
        .btn-c.active { background: var(--grad); color: #fff; border: none; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; padding: 12px; }
        .item { background: var(--card); border-radius: 15px; padding: 10px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .item img { width: 100%; border-radius: 10px; aspect-ratio: 1/1; object-fit: cover; }
        #cart-btn { position: fixed; bottom: 20px; right: 20px; background: var(--grad); color: #fff; border: none; padding: 15px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; z-index: 3000; box-shadow: 0 5px 20px rgba(0,0,0,0.3); }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 4000; align-items: center; justify-content: center; padding: 15px; backdrop-filter: blur(5px); }
        .box { background: var(--card); border-radius: 25px; padding: 20px; width: 100%; max-width: 400px; text-align: center; color: var(--txt); max-height: 90vh; overflow-y: auto; }
        .btn-order { width: 100%; background: #25d366; color: #fff; border: none; padding: 15px; border-radius: 30px; font-weight: bold; margin-top: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; }
    </style>
</head>
<body class="">

<header>
    <div class="logo">Luther</div>
    <div onclick="document.body.classList.toggle('dark')" style="cursor:pointer; font-size:22px">ðŸŒ™</div>
</header>

<div class="cats">
    <div class="btn-c active" onclick="setCat('Tout', this)">Tout</div>
    <div class="btn-c" onclick="setCat('Homme', this)">Homme</div>
    <div class="btn-c" onclick="setCat('Femme', this)">Femme</div>
    <div class="btn-c" onclick="setCat('Enfant', this)">Enfant</div>
</div>

<div class="grid" id="out"></div>

<button id="cart-btn" onclick="openCartView()">ðŸ›’ Panier (<span id="count">0</span>)</button>

<div id="pop" class="modal">
    <div class="box">
        <img id="p-img" src="" style="width:100%; border-radius:15px">
        <h2 id="p-name"></h2>
        <p id="p-price" style="font-size:24px; font-weight:bold; color:#1e3a8a"></p>
        <button onclick="addToCart()" style="width:100%; background:var(--grad); color:#fff; border:none; padding:15px; border-radius:30px; font-weight:bold; cursor:pointer">AJOUTER AU PANIER</button>
        <p onclick="closePop()" style="margin-top:20px; cursor:pointer; font-size:12px; opacity:0.6">Fermer</p>
    </div>
</div>

<div id="cart-modal" class="modal">
    <div class="box">
        <h3>Votre Commande</h3>
        <div id="cart-items-list" style="text-align:left; margin:15px 0; max-height:200px; overflow-y:auto"></div>
        <hr>
        <p style="font-weight:bold">Total: <span id="total-price">0â‚¬</span></p>
        
        <button class="btn-order" onclick="sendWhatsApp()">
            <i class="fab fa-whatsapp"></i> COMMANDER SUR WHATSAPP
        </button>
        
        <p onclick="closeCart()" style="margin-top:20px; cursor:pointer; font-size:12px; opacity:0.6">Continuer mes achats</p>
    </div>
</div>

<script>
    // Configuration
    const MON_WHATSAPP = "2250000000000"; // <--- REMPLACE PAR TON NUMÃ‰RO (ex: 225...)
    
    const data = Array.from({length: 40}, (_, i) => ({
        id: i, name: "Luther Style #"+(i+1), price: 45 + i, img: "badg noir.JPG", cat: i%3==0?'Homme':(i%3==1?'Femme':'Enfant')
    }));

    let cart = [];

    function show(l) {
        document.getElementById('out').innerHTML = l.map(p => `
            <div class="item" onclick="openP(${p.id})">
                <img src="${p.img}">
                <div style="font-weight:bold; margin-top:8px">${p.name}</div>
                <div style="color:#1e3a8a; font-weight:bold">${p.price}â‚¬</div>
            </div>
        `).join('');
    }

    let selectedProduct = null;
    function openP(id) {
        selectedProduct = data[id];
        document.getElementById('p-name').innerText = selectedProduct.name;
        document.getElementById('p-price').innerText = selectedProduct.price + "â‚¬";
        document.getElementById('p-img').src = selectedProduct.img;
        document.getElementById('pop').style.display = 'flex';
    }

    function addToCart() {
        cart.push(selectedProduct);
        document.getElementById('count').innerText = cart.length;
        closePop();
    }

    function openCartView() {
        const list = document.getElementById('cart-items-list');
        const total = cart.reduce((sum, item) => sum + item.price, 0);
        list.innerHTML = cart.map(item => `<div>â€¢ ${item.name} (${item.price}â‚¬)</div>`).join('');
        document.getElementById('total-price').innerText = total + "â‚¬";
        document.getElementById('cart-modal').style.display = 'flex';
    }

    function sendWhatsApp() {
        if(cart.length === 0) return alert("Le panier est vide !");
        let message = "Bonjour Luther Fashion, je souhaite commander :\n\n";
        cart.forEach(item => message += "- " + item.name + " (" + item.price + "â‚¬)\n");
        message += "\nTotal : " + document.getElementById('total-price').innerText;
        
        const url = "https://wa.me/" + MON_WHATSAPP + "?text=" + encodeURIComponent(message);
        window.open(url, '_blank');
    }

    function setCat(c, btn) {
        document.querySelectorAll('.btn-c').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        show(c === 'Tout' ? data : data.filter(p => p.cat === c));
    }

    function closePop() { document.getElementById('pop').style.display = 'none'; }
    function closeCart() { document.getElementById('cart-modal').style.display = 'none'; }

    window.onload = () => {
        show(data);
        // Force dÃ©sactivation vieux cache
        if('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
        }
    };
</script>
</body>
</html>
